<div class="container-fluid">
	<br/>
	<br/>
    <h1 class="page-header" align="center">Mi Ruta
		<!--<div style="float:right;">
			<a type="button" class="btn btn-info btn-xs" href="#/empresaCorridaNew/{{rutaid}}">
				<span class="glyphicon glyphicon-plus"></span>Crear corrida
			</a>
		</div>-->
    </h1>
    <link href="css/panels.css" rel="stylesheet">
    <form name="exForm" novalidate class="form-1200">
       	<div class="panel panel-info">

	   		<div class="panel-heading" align="center">
	   			<a type="button" class="btn btn-info btn-xs" href="#/empresaCorridaNew/{{rutaid}}"><span class="glyphicon glyphicon-plus"></span>Crear corrida</a>
	   			<button class="btn btn-link" ng-click="cancel()">Regresar a mis Rutas</button>
	   		</div>

	   		<div class="panel-body">
				<ul class="nav nav-tabs">
				  <li><a href="#/empresaRutaShow/{{rutaid}}">General</a></li>
				  <li><a href="#/empresaMapaShow/{{rutaid}}">Mapa</a></li>
				  <li class="active"><a href="#">Corridas</a></li>
				  <li><a href="#/empresaRutaUsuariosList/{{rutaid}}">Usuarios registrados</a></li>
				</ul>

				<div class="alert alert-danger alert-dismissable" ng-show="(errMsg != null)&&(errMsg != '')">
				  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				  <strong>Error!</strong> {{errMsg}}
				</div>
				<div class="alert alert-success alert-dismissable" ng-show="(sucMsg != null)&&(sucMsg != '')">
				  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				  {{sucMsg}}
				</div>  
				<img ng-show="(corridas==null)&&(errMsg == null)" alt="Loading  Content" src="imgs/loading.gif" height="25px" />		
				<div bn-slide-show="message!=''" slide-show-duration="500" style="float: center" ng-class="messageType">
					<p ng-bind-html="message"></p>
				</div>
				<div class="table-responsive">
					<table class="table table-striped">
						<thead>
							<tr>
								<th><a href="" ng-click="orderProp='id'">ID</a></th>
								<th><a href="" ng-click="orderProp='horaSalidaFmt'">Hora de salida</a></th>
								<th><a href="" ng-click="orderProp='horaLlegadaFmt'">Hora de llegada</a></th>
								<th><a href="" ng-click="orderProp='!dia1'">Lun</a></th>
								<th><a href="" ng-click="orderProp='!dia2'">Mar</a></th>
								<th><a href="" ng-click="orderProp='!dia3'">M&iacute;e</a></th>
								<th><a href="" ng-click="orderProp='!dia4'">Jue</a></th>
								<th><a href="" ng-click="orderProp='!dia5'">Vie</a></th>
								<th><a href="" ng-click="orderProp='!dia6'">Sab</a></th>
								<th><a href="" ng-click="orderProp='!dia7'">Dom</a></th>
								<th><a href="" ng-click="orderProp='capacidadOfertada'">Capacidad ofertada</a></th>
								<th><a href="" ng-click="orderProp='tarifa'">Tarifa (MX$)</a></th>
								<th>-</th>
							</tr>
						</thead>
						<tbody>			
							<tr ng-repeat="corrida in corridas | filter:query | orderBy:orderProp">
								<td>{{corrida.id}}</td>
								<td><a href="#/empresaCorridaShow/{{corrida.id}}">{{corrida.horaSalidaFmt}}</a></td>
								<td>{{corrida.horaLlegadaFmt}}</td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia1==true"></span></td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia2==true"></span></td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia3==true"></span></td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia4==true"></span></td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia5==true"></span></td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia6==true"></span></td>
								<td> <span class="glyphicon glyphicon-xs glyphicon-ok" ng-show="corrida.dia7==true"></span></td>
								<td>{{corrida.capacidadOfertada}}</td>
								<td>{{corrida.tarifa}}</td>
								<td>
									<a type="button" class="btn btn-info" href="#/empresaCorridaShow/{{corrida.id}}"><span class="glyphicon glyphicon-zoom-in"></span></a>
									<a type="button" class="btn btn-info" ng-click="showUsuarios(corrida.id)"><span class="glyphicon glyphicon-user"></span></a>
									<a type="button" class="btn btn-danger" ng-click="deleteCorrida(corrida.id)"><span class="glyphicon glyphicon-remove"></span></a>
									<a type="button" class="btn btn-warning" ng-click="generarOferta(rutaid)"><span class="glyphicon glyphicon-refresh"></span></a>
								</td>

							</tr>
						</tbody>
					</table>		
					
				</div>
			</div>

	   		<div class="panel-heading" align="center">
	   			<button class="btn btn-link" ng-click="cancel()">Regresar a mis Rutas</button>
	   		</div>			
		</div>
	</form>		

	<!-- Modal - usuarios por corrida -->
	<div class="modal fade modal-wide" id="usuariosModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		    <div class="modal-content">
		      	<div class="modal-header">		      		
			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			        <h4 class="modal-title" id="myModalLabel"><b>Usuarios registrados</b></h4>	
		    	</div>
		    	<div class="modal-header" ng-show="((errMsg != null)&&(errMsg != ''))||(sucMsg != null)&&(sucMsg != '')">
					<div class="alert alert-danger alert-dismissable" ng-show="(errMsg != null)&&(errMsg != '')">
					  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
					  <strong>Error!</strong> {{errMsg}}
					</div>
					<div class="alert alert-success alert-dismissable" ng-show="(sucMsg != null)&&(sucMsg != '')">
					  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
					  {{sucMsg}}
					</div>  
					<img ng-show="(usuarios==null)&&(errMsg == null)" alt="Loading  Content" src="imgs/loading.gif" height="25px" />		
					<div bn-slide-show="message!=''" slide-show-duration="500" style="float: center" ng-class="messageType">
						<p ng-bind-html="message"></p>
					</div>
				</div>

		    	<div class="modal-body">
					<table class="table table-hover">
						<thead>
							<tr>
								<th width="10%">
									<div class="input-group">
										<span class="input-group-addon"><a href="" ng-click="orderProp='id'"><b>ID</b></a></span>
										<input ng-model="query.id" type="text" class="form-control input-sm" placeholder="ID" />
									</div>
								</th>
								<th width="25%">
									<div class="input-group">
										<span class="input-group-addon"><a href="" ng-click="orderProp='empresanombre'"><b>Empresa</b></a></span>
										<input ng-model="query.empresanombre" type="text" class="form-control input-sm" placeholder="Empresa" />
									</div>
								</th>
								<th width="20%">
									<div class="input-group">
										<span class="input-group-addon"><a href="" ng-click="orderProp='nombre'"><b>Nombre</b></a></span>
										<input ng-model="query.nombre" type="text" class="form-control input-sm" placeholder="Nombre" />
									</div>
								</th>
								<th width="20%">
									<div class="input-group">
										<span class="input-group-addon"><a href="" ng-click="orderProp='email'"><b>E-mail</b></a></span>
										<input ng-model="query.email" type="text" class="form-control input-sm" placeholder="E-mail" />
									</div>
								</th>
								<th width="10%">
									<div class="input-group">
										<span class="input-group-addon"><a href="" ng-click="orderProp='role'"><b>Rol</b></a></span>
										<input ng-model="query.role" type="text" class="form-control input-sm" placeholder="Rol" />
									</div>
								</th>								
								<th>-</th>
							</tr>
						</thead>

						<tbody>		
							<tr ng-repeat="usr in usuarios | filter:query | orderBy:orderProp">
								<td>{{usr.id}}</td>
								<td ng-show="usr.empresa!=null">{{usr.empresanombre}}</td>
								<td ng-show="usr.empresa==null">EMBARQ M&eacute;xico</td>
								<td><a href="#/embarqUsuarioShow/{{usr.id}}">{{usr.nombre}}</a></td>
								<td>{{usr.email}}</td>
								<td>{{usr.role}}</td>
								<td>
									<!--
									<a type="button" class="btn btn-info" href="#/embarqUsuarioShow/{{usr.id}}"><span class="glyphicon glyphicon-zoom-in"></span></a>
									<a type="button" class="btn btn-danger" ng-click="deleteUsuario(usr.id)" ng-show="usr.id!=user.id"><span class="glyphicon glyphicon-remove"></span></a>
								-->
								</td>

							</tr>			
						</tbody>
					</table>
		    	</div>

			    <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
			        <!--
			        <button type="button" class="btn btn-success">Salvar cambios</button>
			    -->
			    </div>
			
	    	</div>
	  	</div>
	</div>	<!-- End Modal -->	
</div>