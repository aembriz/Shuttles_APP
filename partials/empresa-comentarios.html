<br/>
<div class="container-fluid form-full">
	<h1 class="page-header">Comentarios
		<div style="float:right;">
			<a type="button" class="btn btn-info btn-xs" ng-click="showComentario()"><span class="glyphicon glyphicon-plus"></span>Crear comentario</a>
		</div>
	</h1>

	<div class="alert alert-danger alert-dismissable" ng-show="(errMsg != null)&&(errMsg != '')">
	  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
	  <strong>Error!</strong> {{errMsg}}
	</div>
	<div class="alert alert-success alert-dismissable" ng-show="(sucMsg != null)&&(sucMsg != '')">
	  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
	  {{sucMsg}}
	</div>  
	<img ng-show="(comentarios==null)&&(errMsg == null)" alt="Loading  Content" src="imgs/loading.gif" height="25px" />		
	<div bn-slide-show="message!=''" slide-show-duration="500" style="float: center" ng-class="messageType">
		<p ng-bind-html="message"></p>
	</div>
	<div class="table-responsive">
		<table class="table table-striped">
			<thead>
				<tr>
					<th width="10%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='id'"><b>Fecha</b></a></span>
							<input ng-model="query.id" type="text" class="form-control input-sm" placeholder="ID" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='empresanombre'"><b>Empresa</b></a></span>
							<input ng-model="query.empresanombre" type="text" class="form-control input-sm" placeholder="Empresa" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='usuarionombre'"><b>Usuario</b></a></span>
							<input ng-model="query.usuarionombre" type="text" class="form-control input-sm" placeholder="Usuario" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='usuarioemail'"><b>E-mail</b></a></span>
							<input ng-model="query.usuarioemail" type="text" class="form-control input-sm" placeholder="E-mail" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='comentario'"><b>Comentario</b></a></span>
							<input ng-model="query.comentario" type="text" class="form-control input-sm" placeholder="Comentario" />
						</div>
					</th>						
				</tr>
			</thead>
			<tbody>			
				<tr ng-repeat="com in comentarios | filter:query | orderBy:orderProp">
					<td>{{com.fechaCreada}}</td>
					<td>{{com.empresanombre}}</td>
					<td>{{com.usuarionombre}}</td>
					<td>{{com.usuarioemail}}</td>
					<td>{{com.comentario}}</td>
				</tr>
			</tbody>
		</table>		
		
	</div>

	<!-- Modal - compartir rutas -->
	<div class="modal fade modal-wide" id="comentarioModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		    <div class="modal-content">
		      	<div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			        <h4 class="modal-title" id="myModalLabel"><b>Comentario:</b></h4>	
		    	</div>
		    	<div class="modal-header" ng-show="((errMsg != null)&&(errMsg != ''))||(sucMsg != null)&&(sucMsg != '')">
					<div class="alert alert-danger alert-dismissable" ng-show="(errMsg != null)&&(errMsg != '')">
					  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
					  <strong>Error!</strong> {{errMsg}}
					</div>
					<div class="alert alert-success alert-dismissable" ng-show="(sucMsg != null)&&(sucMsg != '')">
					  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
					  {{sucMsg}}
					</div>
				</div>


		    	<div class="modal-body" ng-show="sucMsg==null">
				    <form name="exForm" novalidate class="form-800">
					   	<div class="panel panel-success">

					   		<div class="panel-heading" align="center">				
								<button type="submit" class="btn btn-success" ng-disabled="exForm.$invalid" ng-click="comentar(comentario)">Enviar comentario</button>
				    		</div>

				    		<div class="panel-body" >
								<div class="form-group" ng-class="{ 'has-error' : exForm.comentario.$invalid && !exForm.comentario.$pristine }">
									<label for="comentario">Comentario</label><br/>
									<textarea name="comentario" class="form-control" placeholder="Escribir el comentario" ng-model="comentario" required></textarea>

									<p ng-show="exForm.comentario.$invalid && !exForm.comentario.$pristine" class="help-block">Se requiere escribir el comentario.</p>
									
								</div>
							</div>	

							<div class="panel-heading" align="center">
							<button type="submit" class="btn btn-success" ng-disabled="exForm.$invalid" ng-click="comentar(comentario)">Enviar comentario</button>
							</div>
						</div>		
				    </form>			

		    	</div>

			    <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
			        <!--
			        <button type="button" class="btn btn-success">Salvar cambios</button>
			    -->
			    </div>
			
	    	</div>
	  	</div>
	</div>	<!-- End Modal -->	
</div>