<br/>
<div class="container-fluid form-full">
    <h1 class="page-header">Rutas Compartidas</h1>
	<link href="css/modal.css" rel="stylesheet">
	<div class="alert alert-danger alert-dismissable" ng-show="(errMsg != null)&&(errMsg != '')">
	  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
	  <strong>Error!</strong> {{errMsg}}
	</div>
	<div class="alert alert-success alert-dismissable" ng-show="(sucMsg != null)&&(sucMsg != '')">
	  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
	  {{sucMsg}}
	</div>  
	<img ng-show="(rutas==null)&&(errMsg == null)" alt="Loading  Content" src="imgs/loading.gif" height="25px" />		
	<div bn-slide-show="message!=''" slide-show-duration="500" style="float: center" ng-class="messageType">
		<p ng-bind-html="message"></p>
	</div>
	<div class="table-responsive">
		<table class="table table-striped">
			<thead>
				<tr>
					<th width="10%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='id'"><b>ID</b></a></span>
							<input ng-model="query.id" type="text" class="form-control input-sm" placeholder="ID" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='empresanombre'"><b>Pertenece</b></a></span>
							<input ng-model="query.empresanombre" type="text" class="form-control input-sm" placeholder="Pertenece" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='empresaClientenombre'"><b>Compartida con</b></a></span>
							<input ng-model="query.empresaClientenombre" type="text" class="form-control input-sm" placeholder="Compartida con" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='rutumnombre'"><b>Nombre</b></a></span>
							<input ng-model="query.rutumnombre" type="text" class="form-control input-sm" placeholder="Nombre" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='rutumorigentxt'"><b>Origen</b></a></span>
							<input ng-model="query.rutumorigentxt" type="text" class="form-control input-sm" placeholder="Origen" />
						</div>
					</th>
					<th width="15%">
						<div class="input-group">
							<span class="input-group-addon"><a href="" ng-click="orderProp='rutumdestinotxt'"><b>Destino</b></a></span>
							<input ng-model="query.rutumdestinotxt" type="text" class="form-control input-sm" placeholder="Destino" />
						</div>
					</th>						
					<th>-</th>
				</tr>
			</thead>
			<tbody>			
				<tr ng-repeat="ruta in rutas | filter:query | orderBy:orderProp">
					<td>{{ruta.id}}</td>
					<td>{{ruta.empresanombre}}</td>
					<td>{{ruta.empresaClientenombre}}</td>
					<td>{{ruta.rutumnombre}}</td>
					<td>{{ruta.rutumorigentxt}}</td>
					<td>{{ruta.rutumdestinotxt}}</td>
					<td>
						<a type="button" class="btn btn-danger" ng-click="deleteRutaCompartida(ruta.id)"><span class="glyphicon glyphicon-remove"></span></a>
					</td>

				</tr>
			</tbody>
		</table>		
		
	</div>

	<!-- Modal - compartir rutas -->
	<div class="modal fade modal-wide" id="compartirModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		    <div class="modal-content">

		      	<div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			        <h4 class="modal-title" id="myModalLabel">{{RutaSelected.nombre}}</h4>
			        <br/>
			        {{RutaSelected.companyowner.nombre}}	
			        <br/>
			        {{RutaSelected.origentxt}} - {{RutaSelected.destinotxt}}	
		    	</div>

		    	<div class="modal-body">
					<div class="table-responsive">
						<table class="table table-hover">
							<thead>
								<tr>
									<th><a href="" ng-click="orderProp='id'">ID</a></th>
									<th><a href="" ng-click="orderProp='nombre'">Nombre</a></th>
									<th><a href="" ng-click="orderProp='razonsocial'">Raz&oacute;n Social</a></th>
									<th><a href="" ng-click="orderProp='rfc'">RFC</a></th>
								</tr>
							</thead>

							<tbody>			
								<tr ng-repeat="empresa in empresas | filter:query | orderBy:orderProp">
									<td>{{empresa.id}}</td>
									<td>{{empresa.nombre}}</td>
									<td>{{empresa.razonsocial}}</td>
									<td>{{empresa.rfc}}</td>
									<td>
										<a ng-show="(empresa.id != RutaSelected.companyowner.id)" type="button" class="btn btn-success" ng-click="compartirRuta(RutaSelected, empresa)">Compartir</a>
									</td>
								</tr>																
							</tbody>
						</table>
					</div>				

		    	</div>

			    <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
			        <!--
			        <button type="button" class="btn btn-success">Salvar cambios</button>
			    -->
			    </div>
			
	    	</div>
	  	</div>
	</div>	<!-- End Modal -->	
</div>